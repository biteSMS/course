# 正则表达式

> **正则表达式**，又称**正规表示式**、**正规表示法、正规表达式、规则表达式、常规表示法**（英语：Regular Expression，在代码中常简写为regex、regexp或RE），计算机科学的一个概念。正则表达式使用单个字符串来描述、匹配一系列匹配某个句法规则的字符串。在很多文本编辑器里，正则表达式通常被用来检索、替换那些匹配某个模式的文本。通俗的讲就是按照某种**规则**去匹配符合条件的字符串。

| single char                               | quantifiers(数量)             | position(位置)             | flag(修饰符)     |
| :---------------------------------------- | ----------------------------- | -------------------------- | ---------------- |
| \d 匹配数字                               | * 0个或者更多                 | ^一行的开头                | g 匹配全部符合的 |
| \w  匹配word(数字、字母)                  | + 1个或更多，至少1个          | $一行的结尾                | m 多行匹配       |
| \W 匹配**非**word(数字、字母)             | ? 0个或1个                    | \b 单词"结界"(word bounds) | i 忽略大小写     |
| \s 匹配white space(包括空格、tab等)       | {min,max}出现次数在一个范围内 |                            |                  |
| \S 匹配**非**white space(包括空格、tab等) | {n}匹配出现n次的              |                            |                  |
| . 匹配任何，任何的字符                    |                               |                            |                  |

## JS中的Regexp对象

Javascript 通过内置对象RegExp支持正则表达式，有两种方法实例化RegExp对象

##### 字面量方法

```js
const reg = /hi/g
```

##### 构造函数

```js
const reg = new RegExp('hi', 'g')
```

##基本语法

### 普通字符

普通字符包括没有显式指定为元字符的所有可打印和不可打印字符。这包括所有大写和小写字母、所有数字、所有标点符号和一些其他符号。

###特殊字符

所谓特殊字符，就是一些有特殊含义的字符。

| 特殊字符 | 描述                                                         |
| -------- | ------------------------------------------------------------ |
| $        | 匹配输入字符串的结尾位置。                                   |
| ( )      | 标记一个子表达式的开始和结束位置。子表达式可以获取供以后使用。 |
| *        | 匹配0个或者更多。                                            |
| +        | 匹配1个或更多。                                              |
| .        | 匹配任何单字符。                                             |
| [        | 标记一个中括号表达式的开始。                                 |
| ?        | 匹配前面的子表达式零次或一次，或指明一个非贪婪限定符。       |
| \        | 转义符。                                                     |
| ^        | 匹配输入字符串的开始位置，除非在方括号表达式中使用，此时它表示不接受该字符集合。 |
| {        | 标记限定符表达式的开始。                                     |
| \|       | 指明两项之间的一个选择。                                     |

若要匹配这些特殊字符，必须首先使字符"转义"，将反斜杠字符`\`放在它们前面。

## 修饰符

| 字符 | 描述           |
| ---- | -------------- |
| g    | 匹配全部符合的 |
| m    | 多行匹配       |
| i    | 忽略大小写     |

###限定符

限定符用来指定正则表达式的一个给定组件必须要出现多少次才能满足匹配。

| 字符  | 描述                                                         |
| ----- | ------------------------------------------------------------ |
| *     | 匹配前面的子表达式零次或多次。                               |
| +     | 匹配前面的子表达式一次或多次。                               |
| ?     | 匹配前面的子表达式零次或一次。                               |
| {n}   | n 是一个非负整数。匹配确定的 n 次。                          |
| {n,}  | n 是一个非负整数。至少匹配n 次。                             |
| {n,m} | m 和 n 均为非负整数，其中n <= m。最少匹配 n 次且最多匹配 m 次。 |

### 定位符

定位符用来描述字符串或单词的边界。

| 字符 | 描述                                   |
| ---- | -------------------------------------- |
| ^    | 匹配输入字符串开始的位置。             |
| $    | 匹配输入字符串结尾的位置。             |
| \b   | 匹配一个单词边界，即字与空格间的位置。 |
| \B   | 非单词边界匹配。                       |

### 其他元字符

| 字符   | 描述                                                         |
| ------ | ------------------------------------------------------------ |
| x\|y   | 匹配 x 或 y。                                                |
| [xyz]  | 字符集合。匹配所包含的任意一个字符。                         |
| [^xyz] | 负值字符集合。匹配未包含的任意字符                           |
| [a-z]  | 字符范围。匹配指定范围内的任意字符。例如，[a-z] 可以匹配 a 到 z 范围内的任意小写字母字符。 |
| [^a-z] | 负值字符范围。匹配任何不在指定范围内的任意字符。例如，`[^a-z]`可以匹配任何不在 a 到 z 范围内的任意字符。 |
| \d     | 匹配一个数字字符。等价于 [0-9]。                             |
| \D     | 匹配一个非数字字符。等价于` [^0-9]`。                        |
| \s     | 匹配任何空白字符，包括空格、制表符、换页符等等。             |
| \S     | 匹配任何非空白字符。                                         |
| \w     | 匹配字母、数字、下划线。等价于[A-Za-z0-9_]。                 |
| \W     | 匹配非字母、数字、下划线。等价于` [^A-Za-z0-9_]`。           |

## 分组捕获

分组，又称为子表达式。把正则表达式拆分成小表达式。使用()进行数据分组。

```js
var s = '20190324'
var reg = /(\d{4})(\d{2})(\d{2})/

20190324        Group0
2019            Group1
03              Group2
24              Group3

//这里有两种方法选择已经匹配的分组，第一种使用$符号，第二种，使用\。

s.replace(reg, '$1年$2月$3日')
```

## 在JavaScript中的应用

### reg.test()

用于指示是否有所匹配，返回一个bool变量。

### str.match()

与test()不同，不只是返回bool变量，它会返回你所匹配到的内容。

### reg.exec()

这个方法可以实现匹配全局，并返回分组的结果。reg.exec()有点类似与迭代器，每次调用，返回一个匹配的结果，匹配结果和分组以数组的形式返回，不断的调用即可返回下一个结果，直到返回`null`。

### str.split()

用于字符串分割。

### str.replace()

替换正则匹配的内容。



